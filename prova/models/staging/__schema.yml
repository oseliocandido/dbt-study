version: 2

models:
  - name: target
    description: "Relacionado a target table"
    docs:
      show: true 

    materialized: view
    schema: staging
    alias: targets

    contract:
      enforced: false 

    # constraints:
    #   columns:
    #   type:

    # tests:
    #   - Lembrar se pode ser teste singular aqui tb e como funciona seletor dele a nivel de singular e generico

    tests:
      - generic_model
    

    
    
    persist_docs:
      relation: true
      columns: true 


    #Essa parte da documentacao relacionado a precedence order ta meio confuso
    full_refresh: true 

    #Entender pq isso aqui n ta funcionando!
    pre-hook: "CREATE TABLE IF NOT EXISTS target_teste (i integer);"

    columns:
      - name: sk_target
        description: primary key of target table 
        tags: ['sk']
        tests:
          - unique
          - not_null 
          - bora_generic:
              value: 802
        meta:
          chave: true 
      - name: target
        tests:
          - unique:
              config:
                enabled: true
                severity: 'warn'
                warn_if: '>40'
